(function(c,f,m){var k=0;c.Lazyload=c.Class.extend({init:function(a,b){this.container=this.element=a;this.options=c.extend({selector:"",diff:!1,force:!1,autoDestroy:!0,duration:100},b);this._key=0;this._containerIsNotDocument=9!==this.container.nodeType;this._callbacks={};this._init()},_init:function(){this._initLoadFn();this.addElements();this._loadFn();c.ready(function(){this._loadFn()}.bind(this));this.resume()},_initLoadFn:function(){var a=this;a._loadFn=this._buffer(function(){a.options.autoDestroy&&0==a._counter&&c.isEmptyObject(a._callbacks)&&a.destroy();a._loadItems()},a.options.duration,a)},_createLoader:function(a){var b,g,e=[],d;return function(c){g||(g=!0,a(function(a){for(b=a;d=e.shift();)try{d&&d.apply(null,[b])}catch(l){setTimeout(function(){throw l;},0)}}));if(b)return c&&c.apply(null,[b]),b;c&&e.push(c);return b}},_buffer:function(a,b,g){function e(){d&&(d.cancel(),d=0);h=c.now();a.apply(g||this,arguments);f=c.now()}var d,h=0,f=0;b=b||150;return c.extend(function(){!h||f>=h&&c.now()-f>b||f<h&&c.now()-h>8*b?e():(d&&d.cancel(),d=c.later(e,b,null,arguments))},{stop:function(){d&&(d.cancel(),d=0)}})},_getBoundingRect:function(a){var b,g,e;void 0!==a?(b=a.offsetHeight,g=a.offsetWidth,e=c.offset(a),a=e.left,e=e.top):(b=f.innerHeight,g=f.innerWidth,a=0,e=f.pageYOffset);var d=this.options.diff;return{left:a-0,top:e-0,right:a+g+(!1===d?g:d),bottom:e+b+(!1===d?b:d)}},_cacheWidth:function(a){return a._mui_lazy_width?a._mui_lazy_width:a._mui_lazy_width=a.offsetWidth},_cacheHeight:function(a){return a._mui_lazy_height?a._mui_lazy_height:a._mui_lazy_height=a.offsetHeight},_isCross:function(a,b){var c,e,d,f;c=Math.max(a.top,b.top);e=Math.min(a.bottom,b.bottom);d=Math.max(a.left,b.left);f=Math.min(a.right,b.right);return e>=c&&f>=d},_elementInViewport:function(a,b,g){if(!a.offsetWidth)return!1;var e=c.offset(a),d=!0,f=e.left,e=e.top;a={left:f,top:e,right:f+this._cacheWidth(a),bottom:e+this._cacheHeight(a)};(b=this._isCross(b,a))&&g&&(d=this._isCross(g,a));return d&&b},_loadItems:function(){var a=this;if(!a._containerIsNotDocument||a.container.offsetWidth)a._windowRegion=a._getBoundingRect(),a._containerIsNotDocument&&(a._containerRegion=a._getBoundingRect(this.container)),c.each(a._callbacks,function(b,c){c&&a._loadItem(b,c)})},_loadItem:function(a,b){b=b||this._callbacks[a];if(!b)return!0;var c=b.el,e=!1,d=b.fn;if(this.options.force||this._elementInViewport(c,this._windowRegion,this._containerRegion))try{e=d.call(this,c,a)}catch(h){setTimeout(function(){throw h;},0)}!1!==e&&delete this._callbacks[a];return e},addCallback:function(a,b){var f=this._callbacks,e={el:a,fn:b||c.noop},d=++this._key;f[d]=e;this._windowRegion?this._loadItem(d,e):this.refresh()},addElements:function(a){var b=this;b._counter=b._counter||0;var f=[];!a&&b.options.selector?f=b.container.querySelectorAll(b.options.selector):c.each(a,function(a,d){f=f.concat(c.qsa(b.options.selector,d))});c.each(f,function(a,c){!c.getAttribute("data-lazyload-id")&&b.addElement(c)&&(c.setAttribute("data-lazyload-id",k++),b.addCallback(c,b.handle))})},addElement:function(a){return!0},handle:function(){},refresh:function(a){a&&this.addElements();this._loadFn()},pause:function(){var a=this._loadFn;this._destroyed||(f.removeEventListener("scroll",a),f.removeEventListener(c.EVENT_MOVE,a),f.removeEventListener("resize",a),this._containerIsNotDocument&&(this.container.removeEventListener("scrollend",a),this.container.removeEventListener("scroll",a),this.container.removeEventListener(c.EVENT_MOVE,a)))},resume:function(){var a=this._loadFn;this._destroyed||(f.addEventListener("scroll",a,!1),f.addEventListener(c.EVENT_MOVE,a,!1),f.addEventListener("resize",a,!1),this._containerIsNotDocument&&(this.container.addEventListener("scrollend",a,!1),this.container.addEventListener("scroll",a,!1),this.container.addEventListener(c.EVENT_MOVE,a,!1)))},destroy:function(){this.pause();this._callbacks={};c.trigger(this.container,"destroy",this);this._destroyed=1}})})(mui,window,document);