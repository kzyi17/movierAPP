/**
 * 工具函数
 * 
 */

/**
 * 将HTML String 转换为 dom 元素
 * @param {Object} text
 */function parseStringToHTML(a){var b=document.createElement("div"),c=document.createDocumentFragment();for(b.innerHTML=a;a=b.firstChild;)c.appendChild(a);return c}function isMobile(a){return"undefined"==typeof a?!1:/^13[\d]{9}$|^14[5,7]{1}\d{8}$|^15[^4]{1}\d{8}$|^17[0,6,7,8]{1}\d{8}$|^18[\d]{9}$/.test(a)?!0:!1}function textCounter(a,b,c){a.value.length>c?a.value=a.value.substring(0,c):document.getElementById(b).innerText=a.value.length+"/"+c}function cameraImages(a){a=a||mui.noop;plus.camera.getCamera().captureImage(function(b){plus.io.resolveLocalFileSystemURL(b,function(c){c=c.toLocalURL();a(c)},function(a){mui.toast("\u8bfb\u53d6\u62cd\u7167\u6587\u4ef6\u9519\u8bef");console.log("\u8bfb\u53d6\u62cd\u7167\u6587\u4ef6\u9519\u8bef\uff1a"+a.message)})},function(a){switch(a.code){case 11:case 2:mui.toast("\u53d6\u6d88\u62cd\u7167 ");break;default:mui.toast("\u5f88\u62b1\u6b49\uff0c\u83b7\u53d6\u62cd\u7167\u5931\u8d25 ")}})}function galleryImages(){mui.toast("\u4ece\u76f8\u518c\u4e2d\u9009\u62e9\u56fe\u7247");plus.gallery.pick(function(a){for(var b in a.files)compressImg(a.files[b],function(a){})},function(a){console.log(JSON.stringify(a));mui.toast("\u53d6\u6d88\u9009\u62e9\u56fe\u7247")},{filter:"image",multiple:!0})}function compressImg(a,b){b=b||mui.noop;var c=new Image;c.src=a;c.onload=function(){var d=c.height,f=c.width,g=f>d,e=Math.max(f,d),d=Math.min(f,d),f=d/e;1200<e&&(e=1200,d=Math.floor(f*e));c.onload=null;plus.zip.compressImage({src:a,quality:50,width:(g?e:d)+"px",height:(g?d:e)+"px"},function(a){console.log(JSON.stringify(a));b(a)},function(a){console.log(JSON.stringify(a))})}}function base64Encode(a,b){b=b||$.noop;plus.io.resolveLocalFileSystemURL(a,function(a){var d=null;a.file(function(a){d=new plus.io.FileReader;d.onloadend=function(a){b(a.target.result)};d.readAsDataURL(a)})},function(a){console.log("\u8bfb\u53d6\u6587\u4ef6\u9519\u8bef\uff1a"+a.message)})}function lazyload(a,b){if(!a.getAttribute("data-loaded")){var c=a.getAttribute("data-lazyload"),d=md5(c),f="_downloads/image/"+d+".jpg",g="";plus.io.resolveLocalFileSystemURL(f,function(e){g=e.toLocalURL();new Image;e.file(function(e){var h=localStorage.getItem(d+"totalSize");e&&e.size==h?(a.setAttribute("src",g),a.setAttribute("data-loaded",!0),a.classList.add("img-lazyload"),b&&b(a)):download_img(c,f,d,a,b)})},function(e){download_img(c,f,d,a,b)})}}function download_img(a,b,c,d,f){plus.downloader.createDownload(a,{filename:b},function(a,e){localStorage.setItem(c+"totalSize",a.totalSize);200!=e?null!=b&&plus.io.resolveLocalFileSystemURL(b,function(a){a.remove(function(a){download_img()},function(a){})}):200===e&&(d.setAttribute("src",plus.io.convertLocalFileSystemURL(b)),d.setAttribute("data-loaded",!0),d.classList.add("img-lazyload"),f&&f(d))}).start()};