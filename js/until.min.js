/**
 * 工具函数
 * 
 */

/**
 * 将HTML String 转换为 dom 元素
 * @param {Object} text
 */function parseStringToHTML(a){var c=document.createElement("div"),b=document.createDocumentFragment();for(c.innerHTML=a;a=c.firstChild;)b.appendChild(a);return b}function isMobile(a){return"undefined"==typeof a?!1:/^13[\d]{9}$|^14[5,7]{1}\d{8}$|^15[^4]{1}\d{8}$|^17[0,6,7,8]{1}\d{8}$|^18[\d]{9}$/.test(a)?!0:!1}function textCounter(a,c,b){a.value.length>b?a.value=a.value.substring(0,b):document.getElementById(c).innerText=a.value.length+"/"+b}function cameraImages(a){a=a||mui.noop;plus.camera.getCamera().captureImage(function(c){plus.io.resolveLocalFileSystemURL(c,function(b){b=b.toLocalURL();a(b)},function(a){mui.toast("\u8bfb\u53d6\u62cd\u7167\u6587\u4ef6\u9519\u8bef");console.log("\u8bfb\u53d6\u62cd\u7167\u6587\u4ef6\u9519\u8bef\uff1a"+a.message)})},function(a){switch(a.code){case 11:case 2:mui.toast("\u53d6\u6d88\u62cd\u7167 ");break;default:mui.toast("\u5f88\u62b1\u6b49\uff0c\u83b7\u53d6\u62cd\u7167\u5931\u8d25 ")}})}function galleryImages(){mui.toast("\u4ece\u76f8\u518c\u4e2d\u9009\u62e9\u56fe\u7247");plus.gallery.pick(function(a){for(var c in a.files)compressImg(a.files[c],function(a){})},function(a){console.log(JSON.stringify(a));mui.toast("\u53d6\u6d88\u9009\u62e9\u56fe\u7247")},{filter:"image",multiple:!0})}function compressImg(a,c){c=c||mui.noop;var b=new Image;b.src=a;b.onload=function(){var d=b.height,e=b.width,f=e>d,g=Math.max(e,d),d=Math.min(e,d),e=d/g;1200<g&&(g=1200,d=Math.floor(e*g));b.onload=null;plus.zip.compressImage({src:a,quality:50,width:(f?g:d)+"px",height:(f?d:g)+"px"},function(a){console.log(JSON.stringify(a));c(a)},function(a){console.log(JSON.stringify(a))})}}function base64Encode(a,c){c=c||$.noop;plus.io.resolveLocalFileSystemURL(a,function(a){var b=null;a.file(function(a){b=new plus.io.FileReader;b.onloadend=function(a){c(a.target.result)};b.readAsDataURL(a)})},function(a){console.log("\u8bfb\u53d6\u6587\u4ef6\u9519\u8bef\uff1a"+a.message)})}function lazyload(a,c){if(!a.getAttribute("data-loaded")){var b=a.getAttribute("data-lazyload");console.log(b);var d="_downloads/image/"+md5(b)+".jpg",e=plus.io.convertLocalFileSystemURL(d),f=new Image;f.src=e;f.onload=function(){console.log("\u5b58\u5728\u672c\u5730\u7f13\u5b58\u56fe\u7247\u6587\u4ef6"+d+"\uff0c\u76f4\u63a5\u663e\u793a");a.setAttribute("src",e);a.setAttribute("data-loaded",!0);a.classList.add("img-lazyload");c&&c()};f.onerror=function(){function e(){plus.downloader.createDownload(b,{filename:d},function(b,f){200!=f?(console.log("\u4e0b\u8f7d\u5931\u8d25,status"+f),null!=d&&plus.io.resolveLocalFileSystemURL(d,function(a){a.remove(function(a){console.log("\u4e34\u65f6\u6587\u4ef6\u5220\u9664\u6210\u529f"+d);e()},function(a){console.log("\u4e34\u65f6\u6587\u4ef6\u5220\u9664\u5931\u8d25"+d)})})):(a.setAttribute("src",plus.io.convertLocalFileSystemURL(d)),a.setAttribute("data-loaded",!0),a.classList.add("img-lazyload"),c&&c())}).start()}console.log("\u4e0d\u5b58\u5728\u672c\u5730\u7f13\u5b58\u56fe\u7247\u6587\u4ef6");console.log("\u5f00\u59cb\u4e0b\u8f7d\u56fe\u7247"+b+" \u7f13\u5b58\u5230\u672c\u5730: "+d);e()}}}function uploadOne(a){a=a||mui.noop;plus.nativeUI.actionSheet({cancel:"\u53d6\u6d88",buttons:[{title:"\u62cd\u7167"},{title:"\u4ece\u76f8\u518c\u4e2d\u9009\u62e9\u56fe\u7247"}]},function(c){switch(c.index){case 1:console.log("\u62cd\u7167");plus.camera.getCamera().captureImage(function(b){plus.io.resolveLocalFileSystemURL(b,function(b){b.file(function(b){console.log(b.size+"--"+b.name);canvasResize(b,{width:400,crop:!1,quality:50,rotate:0,callback:function(b,c,d){a(b)}})})},function(a){mui.toast("\u8bfb\u53d6\u62cd\u7167\u6587\u4ef6\u9519\u8bef");console.log("\u8bfb\u53d6\u62cd\u7167\u6587\u4ef6\u9519\u8bef\uff1a"+a.message)})},function(a){switch(a.code){case 11:case 2:mui.toast("\u53d6\u6d88\u62cd\u7167 ");break;default:mui.toast("\u5f88\u62b1\u6b49\uff0c\u83b7\u53d6\u62cd\u7167\u5931\u8d25 ")}});break;case 2:console.log("\u4ece\u76f8\u518c\u4e2d\u9009\u62e9\u56fe\u7247"),plus.gallery.pick(function(b){plus.io.resolveLocalFileSystemURL(b,function(b){b.file(function(b){console.log(b.size+"--"+b.name);canvasResize(b,{width:400,crop:!1,quality:50,rotate:0,callback:function(b,c,d){a(b)}})})})},function(a){console.log(JSON.stringify(a));mui.toast("\u53d6\u6d88\u9009\u62e9\u56fe\u7247")},{filter:"image",multiple:!1})}})};