/**
 * 弹出选择列表插件
 * 此组件依赖 listpcker ，请在页面中先引入 mui.picker.css + mui.picker.js
 * varstion 1.0.1
 * by Houfeng
 * Houfeng@DCloud.io
 */(function(c,d){c.dom=function(b){if("string"!==typeof b)return b instanceof Array||b[0]&&b.length?[].slice.call(b):[b];c.__create_dom_div__||(c.__create_dom_div__=d.createElement("div"));c.__create_dom_div__.innerHTML=b;return[].slice.call(c.__create_dom_div__.childNodes)};c.PopPicker=c.Class.extend({init:function(b){var a=this;a.options=b||{};a.options.buttons=a.options.buttons||["\u53d6\u6d88","\u786e\u5b9a"];a.panel=c.dom('\x3cdiv class\x3d"mui-poppicker"\x3e\t\t\x3cdiv class\x3d"mui-poppicker-header"\x3e\t\t\t\x3cbutton class\x3d"mui-btn mui-poppicker-btn-cancel"\x3e\u53d6\u6d88\x3c/button\x3e\t\t\t\x3cbutton class\x3d"mui-btn mui-btn-blue mui-poppicker-btn-ok"\x3e\u786e\u5b9a\x3c/button\x3e\t\t\t\x3cdiv class\x3d"mui-poppicker-clear"\x3e\x3c/div\x3e\t\t\x3c/div\x3e\t\t\x3cdiv class\x3d"mui-poppicker-body"\x3e\t\t\x3c/div\x3e\t\x3c/div\x3e')[0];d.body.appendChild(a.panel);a.ok=a.panel.querySelector(".mui-poppicker-btn-ok");a.cancel=a.panel.querySelector(".mui-poppicker-btn-cancel");a.body=a.panel.querySelector(".mui-poppicker-body");a.mask=c.createMask();a.cancel.innerText=a.options.buttons[0];a.ok.innerText=a.options.buttons[1];a.cancel.addEventListener("tap",function(b){a.hide()},!1);a.ok.addEventListener("tap",function(b){a.callback&&!1!==a.callback(a.getSelectedItems())&&a.hide()},!1);a.mask[0].addEventListener("tap",function(){a.hide()},!1);a._createPicker();a.panel.addEventListener("touchstart",function(a){a.preventDefault()},!1);a.panel.addEventListener("touchmove",function(a){a.preventDefault()},!1)},_createPicker:function(){var b=this.options.layer||1,a=100/b+"%";this.pickers=[];for(var d=1;d<=b;d++){var e=c.dom('\x3cdiv class\x3d"mui-picker"\x3e\t\t\x3cdiv class\x3d"mui-picker-inner"\x3e\t\t\t\x3cdiv class\x3d"mui-pciker-rule mui-pciker-rule-ft"\x3e\x3c/div\x3e\t\t\t\x3cul class\x3d"mui-pciker-list"\x3e\t\t\t\x3c/ul\x3e\t\t\t\x3cdiv class\x3d"mui-pciker-rule mui-pciker-rule-bg"\x3e\x3c/div\x3e\t\t\x3c/div\x3e\t\x3c/div\x3e')[0];e.style.width=a;this.body.appendChild(e);var f=c(e).picker();this.pickers.push(f);e.addEventListener("change",function(a){var b=this.nextSibling;b&&b.picker&&b.picker.setItems(((a.detail||{}).item||{}).children)},!1)}},setData:function(b){b=b||[];this.pickers[0].setItems(b)},getSelectedItems:function(){var b=[],a;for(a in this.pickers)b.push(this.pickers[a].getSelectedItem()||{});return b},show:function(b){var a=this;a.callback=b;a.mask.show();d.body.classList.add(c.className("poppicker-active-for-page"));a.panel.classList.add(c.className("active"));a.__back=c.back;c.back=function(){a.hide()}},hide:function(){this.disposed||(this.panel.classList.remove(c.className("active")),this.mask.close(),d.body.classList.remove(c.className("poppicker-active-for-page")),c.back=this.__back)},dispose:function(){var b=this;b.hide();setTimeout(function(){b.panel.parentNode.removeChild(b.panel);for(var a in b)b[a]=null,delete b[a];b.disposed=!0},300)}})})(mui,document);