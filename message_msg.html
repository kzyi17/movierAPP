<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title>我的消息</title>
    <link href="css/mui.min.css" rel="stylesheet"/>
    <link rel="stylesheet" type="text/css" href="css/style.min.css"/>
    <style type="text/css">
    	html,body{background-color: #eeeeee;}
    	.mui-table-view{background-color: #eeeeee;}
    	.msg_top{height: 40px;line-height: 30px; 
    		border-bottom: 1px solid #f1f1f1;
    		display: block;
    		color: #AAAAAA; 
    		margin-bottom: 10px;
    	}
    	.msg_top span{display: inline-block;}
    	img.user_icon{width: 30px;height: 30px;}
    	.user_name{margin-left: 12px;font-size: 16px;}
    	.msg_date{ font-size: 14px;}
    	.mui-table-view-cell:after {
		    background: none;
		}
		.mui-table-view-cell{ margin-top: 10px; background-color: #FFFFFF;}
    </style>
</head>
<body>
	
	<!--下拉刷新容器-->
	<div id="pullrefresh" class="mui-content mui-scroll-wrapper">
		<div class="mui-scroll">
			<!--数据列表-->
			<ul class="mui-table-view ">
				 
			</ul>
		</div>
	</div>
	
	<!--<div>
		<ul class="mui-table-view">
			<li class="mui-table-view-cell mui-media">
				<div class="msg_top">
					<img class="mui-pull-left user_icon" src="images/demo/icon_user_01.png">
					<span class="mui-pull-left user_name">尘埃默默</span>
					<span class="mui-pull-left "></span>
					<span class="mui-pull-right msg_date">2016-02-01 14:46</span>
				</div>
				<a href="javascript:;">
					<img class="mui-media-object mui-pull-left" src="images/demo/icon_msg_01.png">
					<div class="mui-media-body">
						<p class='mui-ellipsis'>来源：二手</p>
						<p class='mui-ellipsis'>标题：威尔帝M2微单陀螺仪</p>
					</div>
				</a>
			</li>
		</ul>	
	</div>-->
	<!--<ul id="OA_task_1" class="mui-table-view">
		<li class="mui-table-view-cell">
			<div class="mui-slider-right mui-disabled">
				<a class="mui-btn mui-btn-red">删除</a>
			</div>
			<div class="mui-slider-handle">
				左滑显示删除按钮
			</div>
		</li>
		<li class="mui-table-view-cell">
			<div class="mui-slider-right mui-disabled">
				<a class="mui-btn mui-btn-red">删除</a>
			</div>
			<div class="mui-slider-handle">
				左滑显示删除按钮
			</div>
		</li>
		<li class="mui-table-view-cell">
			<div class="mui-slider-right mui-disabled">
				<a class="mui-btn mui-btn-red">删除</a>
			</div>
			<div class="mui-slider-handle">
				左滑显示删除按钮
			</div>
		</li>
		<li class="mui-table-view-cell">
			<div class="mui-slider-right mui-disabled">
				<a class="mui-btn mui-btn-red">删除</a>
			</div>
			<div class="mui-slider-handle">
				左滑显示删除按钮
			</div>
		</li>
	</ul>-->
	
<script src="js/mui.min.js"></script>
<script type="text/javascript" charset="UTF-8">
	mui.init({
		pullRefresh: {
			container: '#pullrefresh',
			down: {
				callback: pulldownRefresh
			},
			up: {
				contentrefresh: '正在加载...',
				callback: pullupRefresh
			}
		}
	});
	/**
	 * 下拉刷新具体业务实现
	 */
	function pulldownRefresh() {
		setTimeout(function() {
			var table = document.body.querySelector('.mui-table-view');
			var cells = document.body.querySelectorAll('.mui-table-view-cell');
			for (var i = cells.length, len = i + 3; i < len; i++) {
				var li = document.createElement('li');
				li.className = 'mui-table-view-cell mui-media';
				li.innerHTML = '<div class="msg_top">' 
							 + '<img class="mui-pull-left user_icon" src="images/demo/icon_user_01.png">'
							 + '<span class="mui-pull-left user_name">尘埃默默</span>'
							 + '<span class="mui-pull-left"></span>'
							 + '<span class="mui-pull-right msg_date">2016-02-01 14:46</span>'
							 + '</div>'
							 + '<a href="javascript:;">'
							 + '<img class="mui-media-object mui-pull-left" src="images/demo/icon_msg_01.png">'
							 + '<div class="mui-media-body">'
							 + '<p class="mui-ellipsis">来源：二手</p>'
							 + '<p class="mui-ellipsis">标题：威尔帝M2微单陀螺仪</p>'
							 + '</div>'
							 + '</a>';
				//下拉刷新，新纪录插到最前面；
				table.insertBefore(li, table.firstChild);
			}
			mui('#pullrefresh').pullRefresh().endPulldownToRefresh(); //refresh completed
		}, 1500);
	}
	var count = 0;
	/**
	 * 上拉加载具体业务实现
	 */
	function pullupRefresh() {
		setTimeout(function() {
			mui('#pullrefresh').pullRefresh().endPullupToRefresh((++count > 2)); //参数为true代表没有更多数据了。
			var table = document.body.querySelector('.mui-table-view');
			var cells = document.body.querySelectorAll('.mui-table-view-cell');
			for (var i = cells.length, len = i + 20; i < len; i++) {
				var li = document.createElement('li');
				li.className = 'mui-table-view-cell mui-media';
				li.innerHTML = '<div class="msg_top">' 
							 + '<img class="mui-pull-left user_icon" src="images/demo/icon_user_01.png">'
							 + '<span class="mui-pull-left user_name">尘埃默默</span>'
							 + '<span class="mui-pull-left"></span>'
							 + '<span class="mui-pull-right msg_date">2016-02-01 14:46</span>'
							 + '</div>'
							 + '<a href="javascript:;">'
							 + '<img class="mui-media-object mui-pull-left" src="images/demo/icon_msg_01.png">'
							 + '<div class="mui-media-body">'
							 + '<p class="mui-ellipsis">来源：二手</p>'
							 + '<p class="mui-ellipsis">标题：威尔帝M2微单陀螺仪</p>'
							 + '</div>'
							 + '</a>';
				//li.innerHTML = '<a class="mui-navigate-right">Item ' + (i + 1) + '</a>';
				table.appendChild(li);
			}
		}, 1500);
	}
	if (mui.os.plus) {
		mui.plusReady(function() {
			setTimeout(function() {
				mui('#pullrefresh').pullRefresh().pullupLoading();
			}, 1000);

		});
	} else {
		mui.ready(function() {
			mui('#pullrefresh').pullRefresh().pullupLoading();
		});
	}

//mui.init();
//(function($) {
//	var btnArray = ['确认', '取消'];
//	$('#OA_task_1').on('tap', '.mui-btn', function(event) {
//		var elem = this;
//		var li = elem.parentNode.parentNode;
//		mui.confirm('确认删除该条记录？', 'Hello MUI', btnArray, function(e) {
//			if (e.index == 0) {
//				li.parentNode.removeChild(li);
//			} else {
//				setTimeout(function() {
//					$.swipeoutClose(li);
//				}, 0);
//			}
//		});
//	});
//	
//})(mui);	
</script>	
</body>
</html>