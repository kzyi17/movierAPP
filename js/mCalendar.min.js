(function(a){a.hasClass=function(d,a){return d.className.match(new RegExp("(\\s|^)"+a+"(\\s|$)"))};a.addClass=function(d,e){a.hasClass(d,e)||(d.className+=" "+e)};a.removeClass=function(d,e){a.hasClass(d,e)&&(d.className=d.className.replace(new RegExp("(\\s|^)"+e+"(\\s|$)")," "))};a.DateUtil={};a.DateUtil.addDate=function(d,a){var c=new Date(d);c.setTime(d.getTime()+864E5*a);return c};a.DateUtil.getDateDiff=function(a,e){return(e.getTime()-a.getTime())/864E5};a.DateUtil.getToday=function(){var a=new Date;a.setHours(0,0,0,0);return a}})(mui);(function(a){var d=function(c){var b=document.createElement("div");b.className="mCalendar-container";b.innerHTML='\x3cdiv class\x3d"mCalendar-title"\x3e\x3cdiv class\x3d"mCalendar-prevyear"\x3e\x3c\x3c\x3c/div\x3e\x3cdiv class\x3d"mCalendar-prevmonth"\x3e\x3c\x3c/div\x3e\x3cdiv class\x3d"mCalendar-year"\x3e\x3c/div\x3e\x3cdiv class\x3d"mCalendar-month"\x3e\x3c/div\x3e\x3cdiv class\x3d"mCalendar-nextmonth"\x3e\x3e\x3c/div\x3e\x3cdiv class\x3d"mCalendar-nextyear"\x3e\x3e\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"mCalendar-week"\x3e\x3cdiv\x3e\u65e5\x3c/div\x3e\x3cdiv\x3e\u4e00\x3c/div\x3e\x3cdiv\x3e\u4e8c\x3c/div\x3e\x3cdiv\x3e\u4e09\x3c/div\x3e\x3cdiv\x3e\u56db\x3c/div\x3e\x3cdiv\x3e\u4e94\x3c/div\x3e\x3cdiv\x3e\u516d\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"mCalendar-content clearfix"\x3e\x3c/div\x3e';var a,h,d,e=b.querySelector(".mCalendar-month"),g=b.querySelector(".mCalendar-year");b.querySelector(".mCalendar-prevyear");var k=b.querySelector(".mCalendar-prevmonth");b.querySelector(".mCalendar-nextyear");var v=b.querySelector(".mCalendar-nextmonth"),f=b.querySelector(".mCalendar-content"),m="function"===typeof mui?"tap":"click",p=function(c){c.appendChild(b);c="";for(var a=0;a<options.row_len;a++)for(var l=0;7>l;l++)c+="\x3cdiv\x3e1\x3c/div\x3e";f.innerHTML=c;for(a=f.childNodes.length-1;0<=a;a--)child=f.childNodes[a],child.setAttribute("mc-cell-index",a)},u=function(b){var l;l=new Date(b);l.setDate(1);d=l=c.DateUtil.addDate(l,0-l.getDay());for(var g=f.childNodes.length-1;0<=g;g--){child=f.childNodes[g];var n=c.DateUtil.addDate(l,g);child.innerHTML=""+n.getDate();n.getMonth()!=b.getMonth()?(child.setAttribute("disabled","disabled"),c.removeClass(child,"canChoose")):(child.removeAttribute("disabled"),c.addClass(child,"canChoose"));n.getTime()==b.getTime()&&(c.addClass(child,"mc-cell-selected"),a=child,h=n);n.getTime()==c.DateUtil.getToday().getTime()?c.addClass(child,"today"):c.removeClass(child,"today")}},t=function(b){b&&b.setHours(0,0,0,0);if(a)if(c.removeClass(a,"mc-cell-selected"),h.getFullYear()==b.getFullYear()&&h.getMonth()==b.getMonth()){var l=1*a.getAttribute("mc-cell-index")+c.DateUtil.getDateDiff(h,b);a=f.childNodes[l];c.addClass(a,"mc-cell-selected");h=b}else u(b);else u(b);e.innerHTML=h.getMonth()+1+"\u6708";g.innerHTML=h.getFullYear()+"\u5e74"},q=function(b){var a=new Date(h);b=a.getMonth()+b;12==b?(a.setMonth(0),a.setFullYear(a.getFullYear()+1)):-1==b?(a.setMonth(11),a.setFullYear(a.getFullYear()-1)):a.setMonth(b);t(a)};return{date_selected:function(){return h},init:function(a,b){options=a;p(a.container);this.changeDate(a.date||c.DateUtil.getToday());k.addEventListener(m,function(a){q(-1)},!1);v.addEventListener(m,function(a){q(1)},!1);options.container.addEventListener("swipeleft",function(){q(1)});options.container.addEventListener("swiperight",function(){q(-1)});for(var g=f.childNodes.length-1;0<=g;g--)child=f.childNodes[g],child.addEventListener(m,function(a){a=this.getAttribute("mc-cell-index");a=c.DateUtil.addDate(d,a);this.getAttribute("mc-cell-index");c.hasClass(this,"mc-cell-selected")||(t(a),options.fn(a))},!1)},changeDate:t}}(a),e=function(a){var b='\x3ca class\x3d"mui-control-item"\x3e',b=b+'\x3cdiv class\x3d"mWeek-day"\x3e\u65e5\u671f\x3c/div\x3e',b=b+'\x3cdiv class\x3d"mWeek-week"\x3e\u661f\u671f\x3c/div\x3e',b=b+"\x3c/a\x3e",c=document.createElement("div");c.innerHTML='\x3cdiv class\x3d"mWeek-title"\x3e\u53ef\u63d0\u4f9b\u670d\u52a1\u65f6\u95f4\x3c/div\x3e\x3cdiv class\x3d"mui-scroll-wrapper mui-slider-indicator mui-segmented-control mui-segmented-control-inverted mWeek"\x3e\x3cdiv class\x3d"mui-scroll mWeek-content"\x3e\x3c/div\x3e\x3c/div\x3e';var d=c.querySelector(".mWeek-content"),e,r;return{init:function(g){var k=g.container,h=g.date,f=g.row;h&&h.setHours(0,0,0,0);var m="\u5468\u65e5 \u5468\u4e00 \u5468\u4e8c \u5468\u4e09 \u5468\u56db \u5468\u4e94 \u5468\u516d".split(" "),p="";k.appendChild(c);for(k=0;k<f;k++)p+=b;d.innerHTML=p;for(k=d.childNodes.length-1;0<=k;k--)child=d.childNodes[k],child.setAttribute("mcweek-cell-index",k),f=a.DateUtil.addDate(h,k),child.querySelector(".mWeek-day").innerHTML=""+(f.getMonth()+1)+"-"+f.getDate(),child.querySelector(".mWeek-week").innerHTML=""+m[f.getDay()],f.getTime()==a.DateUtil.getToday().getTime()?child.querySelector(".mWeek-week").innerHTML="\u4eca\u5929":child.querySelector(".mWeek-week").innerHTML=""+m[f.getDay()];r=g.date||a.DateUtil.getToday();e=d.firstChild;a.addClass(d.firstChild,"mui-active mWeek-cell-selected")},changeDate:function(b){b&&b.setHours(0,0,0,0);e?(b=1*e.getAttribute("mcweek-cell-index")+a.DateUtil.getDateDiff(r,b),e=d.childNodes[b]):(b=a.DateUtil.getDateDiff(r,b),e=d.childNodes[b],console.log("bb"))}}}(a);a.fn.MWeek=function(c){var b={container:this[0],date:a.DateUtil.getToday(),row:7,fn:function(){}};a.extend(b,c||{});b.date&&b.date.setHours(0,0,0,0);c={options:{},init:function(){this.options=b;e.init(b)}};c.init();return c};a.fn.MCalendar=function(c){var b={container:this[0],row_len:5,date:void 0,fn:function(){}};a.extend(b,c||{});b.date&&b.date.setHours(0,0,0,0);c={options:{},getDate:function(){return d.date_selected()},init:function(){this.options=b;d.init(b)},show:function(){b.container.style.display="initial"},hide:function(){b.container.style.display="none"}};c.init();return c}})(mui);