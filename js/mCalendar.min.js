(function(a){a.hasClass=function(d,a){return d.className.match(new RegExp("(\\s|^)"+a+"(\\s|$)"))};a.addClass=function(d,e){a.hasClass(d,e)||(d.className+=" "+e)};a.removeClass=function(d,e){a.hasClass(d,e)&&(d.className=d.className.replace(new RegExp("(\\s|^)"+e+"(\\s|$)")," "))};a.DateUtil={};a.DateUtil.addDate=function(d,a){var c=new Date(d);c.setTime(d.getTime()+864E5*a);return c};a.DateUtil.getDateDiff=function(a,e){return(e.getTime()-a.getTime())/864E5};a.DateUtil.getToday=function(){var a=new Date;a.setHours(0,0,0,0);return a}})(mui);(function(a){var d=function(c){var b=document.createElement("div");b.className="mCalendar-container";b.innerHTML='\x3cdiv class\x3d"mCalendar-title"\x3e\x3cdiv class\x3d"mCalendar-prevyear"\x3e\x3c\x3c\x3c/div\x3e\x3cdiv class\x3d"mCalendar-prevmonth"\x3e\x3c\x3c/div\x3e\x3cdiv class\x3d"mCalendar-year"\x3e\x3c/div\x3e\x3cdiv class\x3d"mCalendar-month"\x3e\x3c/div\x3e\x3cdiv class\x3d"mCalendar-nextmonth"\x3e\x3e\x3c/div\x3e\x3cdiv class\x3d"mCalendar-nextyear"\x3e\x3e\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"mCalendar-week"\x3e\x3cdiv\x3e\u65e5\x3c/div\x3e\x3cdiv\x3e\u4e00\x3c/div\x3e\x3cdiv\x3e\u4e8c\x3c/div\x3e\x3cdiv\x3e\u4e09\x3c/div\x3e\x3cdiv\x3e\u56db\x3c/div\x3e\x3cdiv\x3e\u4e94\x3c/div\x3e\x3cdiv\x3e\u516d\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"mCalendar-content clearfix"\x3e\x3c/div\x3e';var a,d,u,e=b.querySelector(".mCalendar-month"),l=b.querySelector(".mCalendar-year");b.querySelector(".mCalendar-prevyear");var r=b.querySelector(".mCalendar-prevmonth");b.querySelector(".mCalendar-nextyear");var n=b.querySelector(".mCalendar-nextmonth"),g=b.querySelector(".mCalendar-content"),k="function"===typeof mui?"tap":"click",f=function(c){c.appendChild(b);c="";for(var a=0;a<options.row_len;a++)for(var d=0;7>d;d++)c+="\x3cdiv\x3e1\x3c/div\x3e";g.innerHTML=c;for(a=g.childNodes.length-1;0<=a;a--)child=g.childNodes[a],child.setAttribute("mc-cell-index",a)},v=function(b){var m;m=new Date(b);m.setDate(1);u=m=c.DateUtil.addDate(m,0-m.getDay());for(var p=g.childNodes.length-1;0<=p;p--){child=g.childNodes[p];var f=c.DateUtil.addDate(m,p);child.innerHTML=""+f.getDate();f.getMonth()!=b.getMonth()?(child.setAttribute("disabled","disabled"),c.removeClass(child,"canChoose")):(child.removeAttribute("disabled"),c.addClass(child,"canChoose"));f.getTime()==b.getTime()&&(c.addClass(child,"mc-cell-selected"),a=child,d=f);f.getTime()==c.DateUtil.getToday().getTime()?c.addClass(child,"today"):c.removeClass(child,"today")}},t=function(b){b&&b.setHours(0,0,0,0);if(a)if(c.removeClass(a,"mc-cell-selected"),d.getFullYear()==b.getFullYear()&&d.getMonth()==b.getMonth()){var f=1*a.getAttribute("mc-cell-index")+c.DateUtil.getDateDiff(d,b);a=g.childNodes[f];c.addClass(a,"mc-cell-selected");d=b}else v(b);else v(b);e.innerHTML=d.getMonth()+1+"\u6708";l.innerHTML=d.getFullYear()+"\u5e74"},q=function(c){var a=new Date(d);c=a.getMonth()+c;12==c?(a.setMonth(0),a.setFullYear(a.getFullYear()+1)):-1==c?(a.setMonth(11),a.setFullYear(a.getFullYear()-1)):a.setMonth(c);t(a)};return{date_selected:function(){return d},init:function(a,b){options=a;f(a.container);this.changeDate(a.date||c.DateUtil.getToday());r.addEventListener(k,function(a){q(-1)},!1);n.addEventListener(k,function(a){q(1)},!1);options.container.addEventListener("swipeleft",function(){q(1)});options.container.addEventListener("swiperight",function(){q(-1)});for(var d=g.childNodes.length-1;0<=d;d--)child=g.childNodes[d],child.addEventListener(k,function(a){a=this.getAttribute("mc-cell-index");a=c.DateUtil.addDate(u,a);this.getAttribute("mc-cell-index");c.hasClass(this,"mc-cell-selected")||(t(a),options.fn(a))},!1)},changeDate:t}}(a),e=function(a){var b="function"===typeof mui?"tap":"click",c='\x3ca class\x3d"mui-control-item"\x3e',c=c+'\x3cdiv class\x3d"mWeek-day"\x3e\u65e5\u671f\x3c/div\x3e',c=c+'\x3cdiv class\x3d"mWeek-week"\x3e\u661f\u671f\x3c/div\x3e',c=c+"\x3c/a\x3e",d=document.createElement("div");d.innerHTML='\x3cdiv class\x3d"mWeek-title"\x3e\u53ef\u63d0\u4f9b\u670d\u52a1\u65f6\u95f4\x3c/div\x3e\x3cdiv class\x3d"mui-scroll-wrapper mui-slider-indicator mui-segmented-control mui-segmented-control-inverted mWeek"\x3e\x3cdiv class\x3d"mui-scroll mWeek-content"\x3e\x3c/div\x3e\x3c/div\x3e';var e=d.querySelector(".mWeek-content"),h,l,r=function(b,k,f){k&&k.setHours(0,0,0,0);var g="\u5468\u65e5 \u5468\u4e00 \u5468\u4e8c \u5468\u4e09 \u5468\u56db \u5468\u4e94 \u5468\u516d".split(" "),h="";b.appendChild(d);for(b=0;b<f;b++)h+=c;e.innerHTML=h;for(b=e.childNodes.length-1;0<=b;b--)child=e.childNodes[b],child.setAttribute("mcweek-cell-index",b),f=a.DateUtil.addDate(k,b),child.querySelector(".mWeek-day").innerHTML=""+(f.getMonth()+1)+"-"+f.getDate(),child.querySelector(".mWeek-week").innerHTML=""+g[f.getDay()],f.getTime()==a.DateUtil.getToday().getTime()?child.querySelector(".mWeek-week").innerHTML="\u4eca\u5929":child.querySelector(".mWeek-week").innerHTML=""+g[f.getDay()]},n=function(b){b&&b.setHours(0,0,0,0);l&&h?(a.removeClass(h,"mWeek-cell-selected"),b=a.DateUtil.getDateDiff(l,b),h=e.childNodes[b],a.addClass(h,"mWeek-cell-selected")):(b=a.DateUtil.getDateDiff(l,b),h=e.childNodes[b],a.addClass(h,"mWeek-cell-selected mui-active"))};return{init:function(c){date_start=c.date||a.DateUtil.getToday();r(c.container,date_start,c.row);l=date_start;n(c.date_selected||date_start);for(var d=e.childNodes.length-1;0<=d;d--)child=e.childNodes[d],child.addEventListener(b,function(b){b=this.getAttribute("mcweek-cell-index");b=a.DateUtil.addDate(date_start,b);a.hasClass(this,"mWeek-cell-selected")||(n(b),c.fn(b))},!1)},changeDate:n}}(a);a.fn.MWeek=function(c){var b={container:this[0],date:void 0,date_selected:void 0,row:7,fn:function(){}};a.extend(b,c||{});b.date&&b.date.setHours(0,0,0,0);c={options:{},init:function(){this.options=b;e.init(b)}};c.init();return c};a.fn.MCalendar=function(c){var b={container:this[0],row_len:5,date:void 0,fn:function(){}};a.extend(b,c||{});b.date&&b.date.setHours(0,0,0,0);c={options:{},getDate:function(){return d.date_selected()},init:function(){this.options=b;d.init(b)},show:function(){b.container.style.display="initial"},hide:function(){b.container.style.display="none"}};c.init();return c}})(mui);