(function(c){c.hasClass=function(a,b){return a.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)"))};c.addClass=function(a,b){c.hasClass(a,b)||(a.className+=" "+b)};c.removeClass=function(a,b){c.hasClass(a,b)&&(a.className=a.className.replace(new RegExp("(\\s|^)"+b+"(\\s|$)")," "))};c.DateUtil={};c.DateUtil.addDate=function(a,b){var d=new Date(a);d.setTime(a.getTime()+864E5*b);return d};c.DateUtil.getDateDiff=function(a,b){return(b.getTime()-a.getTime())/864E5};c.DateUtil.getToday=function(){var a=new Date;a.setHours(0,0,0,0);return a}})(mui);(function(c){var a=function(b){function a(e){e=new Date(e);e.setDate(1);return b.DateUtil.addDate(e,0-e.getDay())}var c,f,h,n=function(e){var a=document.createElement("div");a.className="mc-container";a.innerHTML='\x3cdiv class\x3d"mc-toolbar "\x3e\x3ca class\x3d"mui-icon mui-icon-left-nav mui-pull-left"\x3e\x3c/a\x3e\x3ch1 id\x3d"mc-date-label" class\x3d"mui-title"\x3e\u6807\u9898\x3c/h1\x3e\x3ca class\x3d"mui-icon mui-icon-forward mui-pull-right"\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv\x3e\x3ctable class\x3d"mc-table"\x3e\x3ctr class\x3d"mc-table-head mc-table-row"\x3e\x3cth\x3e\u65e5\x3c/th\x3e\x3cth\x3e\u4e00\x3c/th\x3e\x3cth\x3e\u4e8c\x3c/th\x3e\x3cth\x3e\u4e09\x3c/th\x3e\x3cth\x3e\u56db\x3c/th\x3e\x3cth\x3e\u4e94\x3c/th\x3e\x3cth\x3e\u516d\x3c/th\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv\x3e\x3ctable id \x3d "mc-table-body" class\x3d"mc-table"\x3e\x3c/table\x3e\x3c/div\x3e';e.appendChild(a);e="";for(var c=0;c<options.row_len;c++){e+='\x3ctr class\x3d"mc-table-row"\x3e';for(a=0;7>a;a++)e+='\x3ctd class\x3d"mc-table-cell"\x3e\x3ca\x3e1\x3c/a\x3e\x3c/td\x3e';e+="\x3c/tr\x3e"}b("#mc-table-body")[0].innerHTML=e;c=0;b(".mc-table-cell").each(function(){this.setAttribute("mc-cell-index",c++)})},l=function(e){var k=a(e);h=k;var m=0;b(".mc-table-cell").each(function(){var a=b.DateUtil.addDate(k,m++);this.firstChild.innerHTML=""+a.getDate();a.getMonth()!=e.getMonth()?this.setAttribute("disabled","disabled"):this.removeAttribute("disabled");a.getTime()==e.getTime()&&(b.addClass(this,"mc-cell-selected"),c=this,f=a);a.getTime()==b.DateUtil.getToday().getTime()?b.addClass(this,"mc-table-cell-today"):b.removeClass(this,"mc-table-cell-today")})},g=function(a){a&&a.setHours(0,0,0,0);if(c)if(b.removeClass(c,"mc-cell-selected"),f.getFullYear()==a.getFullYear()&&f.getMonth()==a.getMonth()){var d=1*c.getAttribute("mc-cell-index")+b.DateUtil.getDateDiff(f,a);c=b(".mc-table-cell")[d];b.addClass(c,"mc-cell-selected");f=a}else l(a);else l(a);b("#mc-date-label")[0].innerHTML=f.getMonth()+1+"\u6708"+f.getFullYear()+"\u5e74"};return{date_selected:function(){return f},init:function(a,c){options=a;n(a.container);this.changeDate(a.date||b.DateUtil.getToday());b("#mc-table-body").on("tap",".mc-table-cell",function(){var a=this.getAttribute("mc-cell-index");g(b.DateUtil.addDate(h,a))});var d=function(a){var b=new Date(f);a=b.getMonth()+a;12==a?(b.setMonth(0),b.setFullYear(b.getFullYear()+1)):-1==a?(b.setMonth(11),b.setFullYear(b.getFullYear()-1)):b.setMonth(a);g(b)};a.container.addEventListener("swipeleft",function(){d(1)});a.container.addEventListener("swiperight",function(){d(-1)})},changeDate:g}}(c);c.fn.MCalendar=function(b){var d={container:this[0],row_len:5,date:void 0};c.extend(d,b||{});d.date&&d.date.setHours(0,0,0,0);b={options:{},getDate:function(){return a.date_selected()},init:function(){this.options=d;a.init(d)},show:function(){d.container.style.display="initial"},hide:function(){d.container.style.display="none"},changeDate:function(b){a.changeDate(b)}};b.init();return b};c.fn.MCalendar=function(b){var d={container:this[0],row_len:5,date:void 0};c.extend(d,b||{});d.date&&d.date.setHours(0,0,0,0);b={options:{},getDate:function(){return a.date_selected()},init:function(){this.options=d;a.init(d)},show:function(){d.container.style.display="initial"},hide:function(){d.container.style.display="none"},changeDate:function(b){a.changeDate(b)}};b.init();return b}})(mui);